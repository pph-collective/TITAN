
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the TITAN model">
      
      
      
      
        <link rel="canonical" href="http://pph-collective.github.io/TITAN/api/features/prep/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.3.0">
    
    
      
        <title>PrEP - TITAN</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.8b42a75e.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#titan.features.prep.Prep.name" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="TITAN" class="md-header__button md-logo" aria-label="TITAN" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            TITAN
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              PrEP
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../.." class="md-tabs__link">
      Overview
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../getting_started/" class="md-tabs__link">
        Getting Started
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../agent/" class="md-tabs__link md-tabs__link--active">
        API Reference
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="TITAN" class="md-nav__button md-logo" aria-label="TITAN" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    TITAN
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../run_local/" class="md-nav__link">
        Running locally
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../run_oscar/" class="md-nav__link">
        Running on Oscar
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          API Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="API Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          API Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../agent/" class="md-nav__link">
        Agent
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../agent_set/" class="md-nav__link">
        AgentSet
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3" type="checkbox" id="__nav_3_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_3">
          Agent Exposures
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Agent Exposures" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          Agent Exposures
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../exposures/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../exposures/hiv/" class="md-nav__link">
        HIV
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../exposures/knowledge/" class="md-nav__link">
        Knowledge
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4" type="checkbox" id="__nav_3_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3_4">
          Agent Features
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Agent Features" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Agent Features
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../haart/" class="md-nav__link">
        HAART
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../high_risk/" class="md-nav__link">
        High Risk
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../incar/" class="md-nav__link">
        Incarceration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../external_exposure/" class="md-nav__link">
        External Exposure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../partner_tracing/" class="md-nav__link">
        Partner Tracing
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          PrEP
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        PrEP
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.name" class="md-nav__link">
    name
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.stats" class="md-nav__link">
    stats
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.add_agent" class="md-nav__link">
    add_agent()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.cdc_eligible" class="md-nav__link">
    cdc_eligible()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.discontinue" class="md-nav__link">
    discontinue()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.eligible" class="md-nav__link">
    eligible()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.enroll" class="md-nav__link">
    enroll()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.get_acquisition_risk_multiplier" class="md-nav__link">
    get_acquisition_risk_multiplier()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.init_agent" class="md-nav__link">
    init_agent()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.init_class" class="md-nav__link">
    init_class()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.initiate" class="md-nav__link">
    initiate()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.progress" class="md-nav__link">
    progress()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.remove_agent" class="md-nav__link">
    remove_agent()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.set_stats" class="md-nav__link">
    set_stats()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.update_agent" class="md-nav__link">
    update_agent()
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../random_trial/" class="md-nav__link">
        Random Trial
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../syringe_services/" class="md-nav__link">
        Syringe Services
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vaccine/" class="md-nav__link">
        Vaccine
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_5" type="checkbox" id="__nav_3_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_5">
          Agent Interactions
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Agent Interactions" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_5">
          <span class="md-nav__icon md-icon"></span>
          Agent Interactions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interactions/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interactions/injection/" class="md-nav__link">
        Injection
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interactions/pca/" class="md-nav__link">
        Peer Change Agent
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../interactions/sex/" class="md-nav__link">
        Sex
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../location/" class="md-nav__link">
        Location
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../model/" class="md-nav__link">
        Model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../partnering/" class="md-nav__link">
        Partnering
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../population/" class="md-nav__link">
        Population
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../relationship/" class="md-nav__link">
        Relationship
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reporting/" class="md-nav__link">
        Reporting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/" class="md-nav__link">
        Utility Functions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.name" class="md-nav__link">
    name
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.stats" class="md-nav__link">
    stats
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.add_agent" class="md-nav__link">
    add_agent()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.cdc_eligible" class="md-nav__link">
    cdc_eligible()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.discontinue" class="md-nav__link">
    discontinue()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.eligible" class="md-nav__link">
    eligible()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.enroll" class="md-nav__link">
    enroll()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.get_acquisition_risk_multiplier" class="md-nav__link">
    get_acquisition_risk_multiplier()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.init_agent" class="md-nav__link">
    init_agent()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.init_class" class="md-nav__link">
    init_class()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.initiate" class="md-nav__link">
    initiate()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.progress" class="md-nav__link">
    progress()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.remove_agent" class="md-nav__link">
    remove_agent()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.set_stats" class="md-nav__link">
    set_stats()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#titan.features.prep.Prep.update_agent" class="md-nav__link">
    update_agent()
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>PrEP</h1>
                
                <div class="doc doc-object doc-class">


    <div class="doc doc-contents first">





  <div class="doc doc-children">







  <div class="doc doc-object doc-attribute">



<h3 class="doc doc-heading" id="titan.features.prep.Prep.name">
<code class="codehilite language-python"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Name of feature in the params file.  Also used to name the attribute in Agent</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 class="doc doc-heading" id="titan.features.prep.Prep.stats">
<code class="codehilite language-python"><span class="n">stats</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>PrEP collects the following stats:</p>
<ul>
<li>prep - number of agents with active PrEP</li>
<li>prep_new - number of agents who became active PrEP this time step</li>
<li>prep_injectable - number of agents on injectable PrEP</li>
<li>prep_oral - number of agents on oral PrEP</li>
</ul>
    </div>

  </div>







  <div class="doc doc-object doc-method">



<h3 class="doc doc-heading" id="titan.features.prep.Prep.add_agent">
<code class="codehilite language-python"><span class="n">add_agent</span><span class="p">(</span><span class="n">agent</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

</h3>

    <div class="doc doc-contents ">

      <p>Add an agent to the class (not instance).</p>
<p>Add agent to the PrEP counts by race, and add the agent to the set of new agents.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>agent</code></td>
        <td><code>agent.Agent</code></td>
        <td><p>the agent to add to the class attributes</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>titan/features/prep.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">add_agent</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">agent</span><span class="p">:</span> <span class="s2">&quot;agent.Agent&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add an agent to the class (not instance).</span>

<span class="sd">    Add agent to the PrEP counts by race, and add the agent to the set of new agents.</span>

<span class="sd">    args:</span>
<span class="sd">        agent: the agent to add to the class attributes</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># set up if this is the first time being called</span>
    <span class="bp">cls</span><span class="o">.</span><span class="n">counts</span><span class="p">[</span><span class="n">agent</span><span class="o">.</span><span class="n">race</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 class="doc doc-heading" id="titan.features.prep.Prep.cdc_eligible">
<code class="codehilite language-python"><span class="n">cdc_eligible</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Determine agent eligibility for PrEP under CDC criteria</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>cdc eligibility</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>titan/features/prep.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">cdc_eligible</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Determine agent eligibility for PrEP under CDC criteria</span>

<span class="sd">    returns:</span>
<span class="sd">        cdc eligibility</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">is_msm</span><span class="p">():</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="n">ongoing_duration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">partnership</span><span class="o">.</span><span class="n">ongoing_duration</span>
    <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">relationships</span><span class="p">:</span>
        <span class="n">partner</span> <span class="o">=</span> <span class="n">rel</span><span class="o">.</span><span class="n">get_partner</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">duration</span> <span class="o">&gt;</span> <span class="n">ongoing_duration</span> <span class="ow">and</span> <span class="n">partner</span><span class="o">.</span><span class="n">hiv</span><span class="o">.</span><span class="n">dx</span><span class="p">:</span>  <span class="c1"># type: ignore[attr-defined]</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="n">partner</span><span class="o">.</span><span class="n">drug_type</span> <span class="o">==</span> <span class="s2">&quot;Inj&quot;</span> <span class="ow">or</span> <span class="n">partner</span><span class="o">.</span><span class="n">is_msm</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">True</span>

    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 class="doc doc-heading" id="titan.features.prep.Prep.discontinue">
<code class="codehilite language-python"><span class="n">discontinue</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Discontinue PrEP usage</p>

        <details class="quote">
          <summary>Source code in <code>titan/features/prep.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">discontinue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Discontinue PrEP usage</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">time</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">last_dose_time</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">remove_agent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 class="doc doc-heading" id="titan.features.prep.Prep.eligible">
<code class="codehilite language-python"><span class="n">eligible</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Determine if an agent is eligible for PrEP</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>bool</code></td>
      <td><p>whether the agent is eligible</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>titan/features/prep.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">eligible</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Determine if an agent is eligible for PrEP</span>

<span class="sd">    returns:</span>
<span class="sd">        whether the agent is eligible</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">params</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">hiv</span><span class="o">.</span><span class="n">active</span> <span class="ow">or</span> <span class="n">time</span> <span class="o">&lt;</span> <span class="n">params</span><span class="o">.</span><span class="n">prep</span><span class="o">.</span><span class="n">start_time</span><span class="p">:</span>  <span class="c1"># type: ignore[attr-defined]</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="n">target_model</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">prep</span><span class="o">.</span><span class="n">target_model</span>
    <span class="n">gender</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">classes</span><span class="o">.</span><span class="n">sex_types</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">sex_type</span><span class="p">]</span><span class="o">.</span><span class="n">gender</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active</span>
        <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">vaccine</span><span class="o">.</span><span class="n">active</span>  <span class="c1"># type: ignore[attr-defined]</span>
        <span class="ow">or</span> <span class="n">params</span><span class="o">.</span><span class="n">features</span><span class="o">.</span><span class="n">random_trial</span>
    <span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="n">all_eligible_models</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Allcomers&quot;</span><span class="p">,</span> <span class="s2">&quot;Racial&quot;</span><span class="p">}</span>

    <span class="k">if</span> <span class="n">all_eligible_models</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">target_model</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">if</span> <span class="s2">&quot;cdc_women&quot;</span> <span class="ow">in</span> <span class="n">target_model</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">gender</span> <span class="o">==</span> <span class="s2">&quot;F&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cdc_eligible</span><span class="p">():</span>
                <span class="k">return</span> <span class="kc">True</span>

    <span class="k">if</span> <span class="s2">&quot;cdc_msm&quot;</span> <span class="ow">in</span> <span class="n">target_model</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">gender</span> <span class="o">==</span> <span class="s2">&quot;M&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">cdc_eligible</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">True</span>

    <span class="k">if</span> <span class="s2">&quot;pwid_sex&quot;</span> <span class="ow">in</span> <span class="n">target_model</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">drug_type</span> <span class="o">==</span> <span class="s2">&quot;Inj&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">cdc_eligible</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">True</span>

    <span class="k">if</span> <span class="s2">&quot;pwid&quot;</span> <span class="ow">in</span> <span class="n">target_model</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">drug_type</span> <span class="o">==</span> <span class="s2">&quot;Inj&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>

    <span class="k">if</span> <span class="s2">&quot;ssp_sex&quot;</span> <span class="ow">in</span> <span class="n">target_model</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">syringe_services</span><span class="o">.</span><span class="n">active</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">cdc_eligible</span><span class="p">():</span>  <span class="c1"># type: ignore[attr-defined]</span>
            <span class="k">return</span> <span class="kc">True</span>

    <span class="k">if</span> <span class="s2">&quot;ssp&quot;</span> <span class="ow">in</span> <span class="n">target_model</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">syringe_services</span><span class="o">.</span><span class="n">active</span><span class="p">:</span>  <span class="c1"># type: ignore[attr-defined]</span>
            <span class="k">return</span> <span class="kc">True</span>

    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 class="doc doc-heading" id="titan.features.prep.Prep.enroll">
<code class="codehilite language-python"><span class="n">enroll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rand_gen</span><span class="p">,</span> <span class="n">time</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Enroll an agent in PrEP</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>rand_gen</code></td>
        <td><code></code></td>
        <td><p>random number generator</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>titan/features/prep.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">enroll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rand_gen</span><span class="p">,</span> <span class="n">time</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Enroll an agent in PrEP</span>

<span class="sd">    args:</span>
<span class="sd">        rand_gen: random number generator</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">params</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">time</span> <span class="o">=</span> <span class="n">time</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">last_dose_time</span> <span class="o">=</span> <span class="n">time</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">adherent</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">rand_gen</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
        <span class="o">&lt;</span> <span class="n">params</span><span class="o">.</span><span class="n">demographics</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">race</span><span class="p">]</span>
        <span class="o">.</span><span class="n">sex_type</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">sex_type</span><span class="p">]</span>
        <span class="o">.</span><span class="n">prep</span><span class="o">.</span><span class="n">adherence</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;Inj&quot;</span> <span class="ow">in</span> <span class="n">params</span><span class="o">.</span><span class="n">prep</span><span class="o">.</span><span class="n">type</span> <span class="ow">and</span> <span class="s2">&quot;Oral&quot;</span> <span class="ow">in</span> <span class="n">params</span><span class="o">.</span><span class="n">prep</span><span class="o">.</span><span class="n">type</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">rand_gen</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">params</span><span class="o">.</span><span class="n">prep</span><span class="o">.</span><span class="n">lai</span><span class="o">.</span><span class="n">prob</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s2">&quot;Inj&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s2">&quot;Oral&quot;</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">prep</span><span class="o">.</span><span class="n">type</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_agent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 class="doc doc-heading" id="titan.features.prep.Prep.get_acquisition_risk_multiplier">
<code class="codehilite language-python"><span class="n">get_acquisition_risk_multiplier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">interaction_type</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Get a multiplier for how prep reduces risk of HIV acquisition.</p>
<p>By default, returns 1.0</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>time</code></td>
        <td><code>int</code></td>
        <td><p>the current model time step</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>interaction_type</code></td>
        <td><code>str</code></td>
        <td><p>The type of interaction where the agent could acquire HIV (e.g. 'sex', 'injection' - from [params.classes.interaction_types])</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>titan/features/prep.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">get_acquisition_risk_multiplier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">interaction_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get a multiplier for how prep reduces risk of HIV acquisition.</span>

<span class="sd">    By default, returns 1.0</span>

<span class="sd">    args:</span>
<span class="sd">        time: the current model time step</span>
<span class="sd">        interaction_type: The type of interaction where the agent could acquire HIV (e.g. &#39;sex&#39;, &#39;injection&#39; - from [params.classes.interaction_types])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">active</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_dose_time</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">params</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;Oral&quot;</span><span class="p">:</span>
            <span class="n">adherence</span> <span class="o">=</span> <span class="s2">&quot;adherent&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">adherent</span> <span class="k">else</span> <span class="s2">&quot;non_adherent&quot;</span>
            <span class="k">return</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="n">params</span><span class="o">.</span><span class="n">prep</span><span class="o">.</span><span class="n">efficacy</span><span class="p">[</span><span class="n">adherence</span><span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;Inj&quot;</span><span class="p">:</span>
            <span class="n">annualized_last_dose_time</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">time</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_dose_time</span>
            <span class="p">)</span> <span class="o">/</span> <span class="n">params</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">steps_per_year</span>
            <span class="n">annualized_half_life</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">prep</span><span class="o">.</span><span class="n">half_life</span> <span class="o">/</span> <span class="mi">365</span>
            <span class="n">load</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">prep</span><span class="o">.</span><span class="n">peak_load</span> <span class="o">*</span> <span class="p">(</span>
                <span class="p">(</span><span class="mf">0.5</span><span class="p">)</span> <span class="o">**</span> <span class="p">(</span><span class="n">annualized_last_dose_time</span> <span class="o">/</span> <span class="n">annualized_half_life</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mf">5.528636721</span> <span class="o">*</span> <span class="n">load</span><span class="p">)</span>

    <span class="k">return</span> <span class="mf">1.0</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 class="doc doc-heading" id="titan.features.prep.Prep.init_agent">
<code class="codehilite language-python"><span class="n">init_agent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pop</span><span class="p">,</span> <span class="n">time</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Initialize the agent for this feature during population initialization (<code>Population.create_agent</code>).  Called on only features that are enabled per the params.</p>
<p>If an agent does not have HIV, is PrEP eligible, and time is at least the prep start time, they are randomly asigned to enroll in PrEP.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>pop</code></td>
        <td><code>population.Population</code></td>
        <td><p>the population this agent is a part of</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>time</code></td>
        <td><code>int</code></td>
        <td><p>the current time step</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>titan/features/prep.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">init_agent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pop</span><span class="p">:</span> <span class="s2">&quot;population.Population&quot;</span><span class="p">,</span> <span class="n">time</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the agent for this feature during population initialization (`Population.create_agent`).  Called on only features that are enabled per the params.</span>

<span class="sd">    If an agent does not have HIV, is PrEP eligible, and time is at least the prep start time, they are randomly asigned to enroll in PrEP.</span>

<span class="sd">    args:</span>
<span class="sd">        pop: the population this agent is a part of</span>
<span class="sd">        time: the current time step</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">params</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">eligible</span><span class="p">(</span><span class="n">time</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;Racial&quot;</span> <span class="ow">in</span> <span class="n">params</span><span class="o">.</span><span class="n">prep</span><span class="o">.</span><span class="n">target_model</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">pop</span><span class="o">.</span><span class="n">pop_random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
                <span class="o">&lt;</span> <span class="n">params</span><span class="o">.</span><span class="n">demographics</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">race</span><span class="p">]</span>
                <span class="o">.</span><span class="n">sex_type</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">sex_type</span><span class="p">]</span>
                <span class="o">.</span><span class="n">prep</span><span class="o">.</span><span class="n">init</span>
            <span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">enroll</span><span class="p">(</span><span class="n">pop</span><span class="o">.</span><span class="n">pop_random</span><span class="p">,</span> <span class="n">time</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">pop</span><span class="o">.</span><span class="n">pop_random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">params</span><span class="o">.</span><span class="n">prep</span><span class="o">.</span><span class="n">init</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">enroll</span><span class="p">(</span><span class="n">pop</span><span class="o">.</span><span class="n">pop_random</span><span class="p">,</span> <span class="n">time</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 class="doc doc-heading" id="titan.features.prep.Prep.init_class">
<code class="codehilite language-python"><span class="n">init_class</span><span class="p">(</span><span class="n">params</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

</h3>

    <div class="doc doc-contents ">

      <p>Initialize the counts dictionary for the races in the model.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>params</code></td>
        <td><code>ObjMap</code></td>
        <td><p>the population params</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>titan/features/prep.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">init_class</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="s2">&quot;ObjMap&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the counts dictionary for the races in the model.</span>

<span class="sd">    args:</span>
<span class="sd">        params: the population params</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">cls</span><span class="o">.</span><span class="n">counts</span> <span class="o">=</span> <span class="p">{</span><span class="n">race</span><span class="p">:</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">race</span> <span class="ow">in</span> <span class="n">params</span><span class="o">.</span><span class="n">classes</span><span class="o">.</span><span class="n">races</span><span class="p">}</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 class="doc doc-heading" id="titan.features.prep.Prep.initiate">
<code class="codehilite language-python"><span class="n">initiate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Place agents onto PrEP treatment. PrEP treatment assumes that the agent knows their HIV status is negative.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>model</code></td>
        <td><code>model.TITAN</code></td>
        <td><p>instance of TITAN being run</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>force</code></td>
        <td><code>bool</code></td>
        <td><p>whether to force the agent to enroll instead of using the appropriate algorithm per the prep params</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>titan/features/prep.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">initiate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="s2">&quot;model.TITAN&quot;</span><span class="p">,</span> <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Place agents onto PrEP treatment. PrEP treatment assumes that the agent knows their HIV status is negative.</span>

<span class="sd">    args:</span>
<span class="sd">        model : instance of TITAN being run</span>
<span class="sd">        force : whether to force the agent to enroll instead of using the appropriate algorithm per the prep params</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Prep only valid for agents not on prep and are HIV negative</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">active</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">hiv</span><span class="o">.</span><span class="n">active</span><span class="p">:</span>  <span class="c1"># type: ignore[attr-defined]</span>
        <span class="k">return</span>

    <span class="n">params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">params</span>

    <span class="k">if</span> <span class="n">force</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enroll</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">run_random</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">time</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">params</span><span class="o">.</span><span class="n">prep</span><span class="o">.</span><span class="n">cap_as_prob</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;Racial&quot;</span> <span class="ow">in</span> <span class="n">params</span><span class="o">.</span><span class="n">prep</span><span class="o">.</span><span class="n">target_model</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">model</span><span class="o">.</span><span class="n">run_random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
                <span class="o">&lt;=</span> <span class="n">params</span><span class="o">.</span><span class="n">demographics</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">race</span><span class="p">]</span>
                <span class="o">.</span><span class="n">sex_type</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">sex_type</span><span class="p">]</span>
                <span class="o">.</span><span class="n">prep</span><span class="o">.</span><span class="n">cap</span>
            <span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">enroll</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">run_random</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">time</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">run_random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="n">params</span><span class="o">.</span><span class="n">prep</span><span class="o">.</span><span class="n">cap</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">enroll</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">run_random</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">time</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;Racial&quot;</span> <span class="ow">in</span> <span class="n">params</span><span class="o">.</span><span class="n">prep</span><span class="o">.</span><span class="n">target_model</span><span class="p">:</span>
            <span class="n">num_prep_agents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">counts</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">race</span><span class="p">]</span>
            <span class="n">all_hiv_agents</span> <span class="o">=</span> <span class="n">exposures</span><span class="o">.</span><span class="n">HIV</span><span class="o">.</span><span class="n">agents</span>
            <span class="n">all_race</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">pop</span><span class="o">.</span><span class="n">all_agents</span> <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">race</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">race</span>
            <span class="p">}</span>

            <span class="n">num_hiv_agents</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_hiv_agents</span> <span class="o">&amp;</span> <span class="n">all_race</span><span class="p">)</span>
            <span class="n">target_prep</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">all_race</span><span class="p">)</span> <span class="o">-</span> <span class="n">num_hiv_agents</span><span class="p">)</span> <span class="o">*</span> <span class="n">params</span><span class="o">.</span><span class="n">demographics</span><span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">race</span>
            <span class="p">]</span><span class="o">.</span><span class="n">sex_type</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">sex_type</span><span class="p">]</span><span class="o">.</span><span class="n">prep</span><span class="o">.</span><span class="n">cap</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">num_prep_agents</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">counts</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
            <span class="n">target_prep</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span>
                <span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">pop</span><span class="o">.</span><span class="n">all_agents</span><span class="o">.</span><span class="n">num_members</span><span class="p">()</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">exposures</span><span class="o">.</span><span class="n">HIV</span><span class="o">.</span><span class="n">agents</span><span class="p">))</span>
                <span class="o">*</span> <span class="n">params</span><span class="o">.</span><span class="n">prep</span><span class="o">.</span><span class="n">cap</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">num_prep_agents</span> <span class="o">&lt;</span> <span class="n">target_prep</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">enroll</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">run_random</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">time</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 class="doc doc-heading" id="titan.features.prep.Prep.progress">
<code class="codehilite language-python"><span class="n">progress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Update agent's PrEP status and discontinue stochastically or if <code>force</code> is True</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>model</code></td>
        <td><code>model.TITAN</code></td>
        <td><p>instance of the TITAN being run</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>force</code></td>
        <td><code>bool</code></td>
        <td><p>whether to force discontinuation of PrEP</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>titan/features/prep.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">progress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="s2">&quot;model.TITAN&quot;</span><span class="p">,</span> <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update agent&#39;s PrEP status and discontinue stochastically or if `force` is True</span>

<span class="sd">    args:</span>
<span class="sd">        model: instance of the TITAN being run</span>
<span class="sd">        force: whether to force discontinuation of PrEP</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">force</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discontinue</span><span class="p">()</span>  <span class="c1"># TO_REVIEW should this just remove the agent from counts, or discontinue? does it depend on type?</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;Oral&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">model</span><span class="o">.</span><span class="n">run_random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
            <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">demographics</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">race</span><span class="p">]</span>
            <span class="o">.</span><span class="n">sex_type</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">sex_type</span><span class="p">]</span>
            <span class="o">.</span><span class="n">prep</span><span class="o">.</span><span class="n">discontinue</span>
        <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">discontinue</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">last_dose_time</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">time</span>

    <span class="c1"># TO_REVIEW should inj prep have a way to continue at the year mark (besides maybe getting prep again through the normal channels of enrollment)?</span>
    <span class="k">if</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;Inj&quot;</span>
        <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_dose_time</span>
        <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">steps_per_year</span>
        <span class="o">==</span> <span class="n">model</span><span class="o">.</span><span class="n">time</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discontinue</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 class="doc doc-heading" id="titan.features.prep.Prep.remove_agent">
<code class="codehilite language-python"><span class="n">remove_agent</span><span class="p">(</span><span class="n">agent</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

</h3>

    <div class="doc doc-contents ">

      <p>Remove an agent from the class (not instance).</p>
<p>Decrement the prep counts by race.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>agent</code></td>
        <td><code></code></td>
        <td><p>the agent to remove from the class attributes</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>titan/features/prep.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">remove_agent</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">agent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Remove an agent from the class (not instance).</span>

<span class="sd">    Decrement the prep counts by race.</span>

<span class="sd">    args:</span>
<span class="sd">        agent: the agent to remove from the class attributes</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">cls</span><span class="o">.</span><span class="n">counts</span><span class="p">[</span><span class="n">agent</span><span class="o">.</span><span class="n">race</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 class="doc doc-heading" id="titan.features.prep.Prep.set_stats">
<code class="codehilite language-python"><span class="n">set_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stats</span><span class="p">,</span> <span class="n">time</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Update the <code>stats</code> dictionary passed for this agent.  Called from <code>output.get_stats</code> for each enabled feature in the model.</p>
<p>The stats to be updated must be declared in the class attribute <code>stats</code> to make sure the dictionary has the expected keys/counter value initialized.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>stats</code></td>
        <td><code>Dict[str, int]</code></td>
        <td><p>the dictionary to update with this agent's feature statistics</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>time</code></td>
        <td><code>int</code></td>
        <td><p>the time step of the model when the stats are set</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>titan/features/prep.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">set_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stats</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="n">time</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">active</span><span class="p">:</span>
        <span class="n">stats</span><span class="p">[</span><span class="s2">&quot;prep&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">time</span> <span class="o">==</span> <span class="n">time</span><span class="p">:</span>
            <span class="n">stats</span><span class="p">[</span><span class="s2">&quot;prep_new&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;Inj&quot;</span><span class="p">:</span>
            <span class="n">stats</span><span class="p">[</span><span class="s2">&quot;prep_injectable&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;Oral&quot;</span><span class="p">:</span>
            <span class="n">stats</span><span class="p">[</span><span class="s2">&quot;prep_oral&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 class="doc doc-heading" id="titan.features.prep.Prep.update_agent">
<code class="codehilite language-python"><span class="n">update_agent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Update the agent for this feature for a time step.  Called once per time step in <code>TITAN.update_all_agents</code>. Agent level updates are done after population level updates.   Called on only features that are enabled per the params.</p>
<p>If the agent is not hiv and time is at least the prep start time, if the agent is already on PrEP update their PrEP attributes, if the agent isn't on PrEP and is eleigible, initiate PrEP.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>model</code></td>
        <td><code>model.TITAN</code></td>
        <td><p>the instance of TITAN currently being run</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>titan/features/prep.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">update_agent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="s2">&quot;model.TITAN&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update the agent for this feature for a time step.  Called once per time step in `TITAN.update_all_agents`. Agent level updates are done after population level updates.   Called on only features that are enabled per the params.</span>

<span class="sd">    If the agent is not hiv and time is at least the prep start time, if the agent is already on PrEP update their PrEP attributes, if the agent isn&#39;t on PrEP and is eleigible, initiate PrEP.</span>

<span class="sd">    args:</span>
<span class="sd">        model: the instance of TITAN currently being run</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span>
        <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">hiv</span><span class="o">.</span><span class="n">active</span>  <span class="c1"># type: ignore[attr-defined]</span>
        <span class="ow">and</span> <span class="n">model</span><span class="o">.</span><span class="n">time</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">prep</span><span class="o">.</span><span class="n">start_time</span>
    <span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">active</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">eligible</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">time</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">initiate</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../partner_tracing/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Partner Tracing" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Partner Tracing
            </div>
          </div>
        </a>
      
      
        
        <a href="../random_trial/" class="md-footer__link md-footer__link--next" aria-label="Next: Random Trial" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Random Trial
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant", "navigation.tabs"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.f8263e09.min.js", "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.4fc53ad4.min.js"></script>
      
    
  </body>
</html>